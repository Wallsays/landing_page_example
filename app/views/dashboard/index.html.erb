<div class="container-fluid">
  <div class="row">
    <%= render :partial => "sidebar" %>

    <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
      <h1 class="page-header">Dashboard</h1>

      <div class="row placeholders">
        <div class="col-xs-6 col-sm-3 placeholder">
          <img src="/assets/200x200_sky.svg" class="img-responsive" alt="Generic placeholder thumbnail">
          <h4>Label</h4>
          <span class="text-muted">Something else</span>
        </div>
        <div class="col-xs-6 col-sm-3 placeholder">
          <img src="/assets/200x200_vine.svg" class="img-responsive" alt="Generic placeholder thumbnail">
          <h4>Label</h4>
          <span class="text-muted">Something else</span>
        </div>
        <div class="col-xs-6 col-sm-3 placeholder">
          <h2><%= Order.count %></h2>
          <span class="text-muted">Orders</span>
        </div>
        <div class="col-xs-6 col-sm-3 placeholder">
          <h2><%= Ahoy::Event.where(user_id:nil, name: "Processed landing#index").count %></h2>
          <span class="text-muted">Landing Views</span>
        </div>
      </div>

      <h2 class="sub-header">Orders</h2>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th>Email</th>
              <th>Short name</th>
              <th>City</th>
              <th>Phone</th>
              <th>Message</th>
              <th>Time</th>
            </tr>
          </thead>
          <tbody>
          <% Order.all.each do |ev| %>
            <tr>
              <td><%= ev.id %></td> 
              <td><%= ev.email %></td>
              <td><%= ev.short_name %></td>
              <td><%= ev.city %></td>
              <td><%= ev.phone %></td>
              <td style='max-width:300px'><%= ev.message %></td>
              <td><%= ev.created_at.strftime("%A, %d %b %Y %H:%M %z") %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
      </div>

      <h2 class="sub-header">Events</h2>
      <div class="table-responsive">
        <table class="table table-striped">
          <thead>
            <tr>
              <!-- <th>#</th> -->
              <!-- <th>Visit ID</th> -->
              <!-- <th>User ID</th> -->
              <th>Name</th>
              <th>Properties</th>
              <th>Time</th>
            </tr>
          </thead>
          <tbody>
          <% Ahoy::Event.where(user_id:nil).each do |ev| %>
            <tr>
              <!-- <td><%#= ev.id %></td> --> 
              <!-- <td><%#= ev.visit_id %></td> -->
              <!-- <td><%#= ev.user %></td> -->
              <!-- <td><%#= ev.name %></td> -->
              <td><%= ev.properties['action'] %></td>
              <td><%= ev.properties['controller'] %></td>
              <td><%= ev.time.strftime("%A, %d %b %Y %H:%M %z") %></td>
            </tr>
          <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>


